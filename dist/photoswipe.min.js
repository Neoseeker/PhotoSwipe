/*! PhotoSwipe - v4.0.8 - 2015-05-21
* http://photoswipe.com
* Copyright (c) 2015 Dmitry Semenov; */
(function(a,b){if(typeof define==="function"&&define.amd){define(b)}else{if(typeof exports==="object"){module.exports=b()}else{a.PhotoSwipe=b()}}})(this,function(){var a=function(a2,bt,cp,bu){var by={features:null,bind:function(cA,cy,cz,cx){var p=(cx?"remove":"add")+"EventListener";cy=cy.split(" ");for(var cw=0;cw<cy.length;cw++){if(cy[cw]){cA[p](cy[cw],cz,false)}}},isArray:function(p){return(p instanceof Array)},createEl:function(cw,p){var cx=document.createElement(p||"div");if(cw){cx.className=cw}return cx},getScrollY:function(){var p=window.pageYOffset;return p!==undefined?p:document.documentElement.scrollTop},unbind:function(cx,p,cw){by.bind(cx,p,cw,true)},removeClass:function(cx,cw){var p=new RegExp("(\\s|^)"+cw+"(\\s|$)");cx.className=cx.className.replace(p," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(cw,p){if(!by.hasClass(cw,p)){cw.className+=(cw.className?" ":"")+p}},hasClass:function(cw,p){return cw.className&&new RegExp("(^|\\s)"+p+"(\\s|$)").test(cw.className)},getChildByClass:function(cw,p){var cx=cw.firstChild;while(cx){if(by.hasClass(cx,p)){return cx}cx=cx.nextSibling}},arraySearch:function(cy,cx,cw){var p=cy.length;while(p--){if(cy[p][cw]===cx){return p}}return -1},extend:function(cx,cw,p){for(var cy in cw){if(cw.hasOwnProperty(cy)){if(p&&cx.hasOwnProperty(cy)){continue}cx[cy]=cw[cy]}}},easing:{sine:{out:function(p){return Math.sin(p*(Math.PI/2))},inOut:function(p){return -(Math.cos(Math.PI*p)-1)/2}},cubic:{out:function(p){return --p*p*p+1}}},detectFeatures:function(){if(by.features){return by.features}var cy=by.createEl(),cC=cy.style,cF="",cx={};cx.oldIE=document.all&&!document.addEventListener;cx.touch="ontouchstart" in window;if(window.requestAnimationFrame){cx.raf=window.requestAnimationFrame;cx.caf=window.cancelAnimationFrame}cx.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled;if(!cx.pointerEvent){var cw=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var cG=(navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/);if(cG&&cG.length>0){cG=parseInt(cG[1],10);if(cG>=1&&cG<8){cx.isOldIOSPhone=true}}}var cB=cw.match(/Android\s([0-9\.]*)/);var cI=cB?cB[1]:0;cI=parseFloat(cI);if(cI>=1){if(cI<4.4){cx.isOldAndroid=true}cx.androidVersion=cI}cx.isMobileOpera=/opera mini|opera mobi/i.test(cw)}var cD=["transform","perspective","animationName"],cH=["","webkit","Moz","ms","O"],cJ,cz;for(var cA=0;cA<4;cA++){cF=cH[cA];for(var cE=0;cE<3;cE++){cJ=cD[cE];cz=cF+(cF?cJ.charAt(0).toUpperCase()+cJ.slice(1):cJ);if(!cx[cJ]&&cz in cC){cx[cJ]=cz}}if(cF&&!cx.raf){cF=cF.toLowerCase();cx.raf=window[cF+"RequestAnimationFrame"];if(cx.raf){cx.caf=window[cF+"CancelAnimationFrame"]||window[cF+"CancelRequestAnimationFrame"]}}}if(!cx.raf){var p=0;cx.raf=function(cL){var cK=new Date().getTime();var cM=Math.max(0,16-(cK-p));var cN=window.setTimeout(function(){cL(cK+cM)},cM);p=cK+cM;return cN};cx.caf=function(cK){clearTimeout(cK)}}cx.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect;by.features=cx;return cx}};by.detectFeatures();if(by.features.oldIE){by.bind=function(cB,cz,cA,cy){cz=cz.split(" ");var p=(cy?"detach":"attach")+"Event",cx,cC=function(){cA.handleEvent.call(cA)};for(var cw=0;cw<cz.length;cw++){cx=cz[cw];if(cx){if(typeof cA==="object"&&cA.handleEvent){if(!cy){cA["oldIE"+cx]=cC}else{if(!cA["oldIE"+cx]){return false}}cB[p]("on"+cx,cA["oldIE"+cx])}else{cB[p]("on"+cx,cA)}}}}}var a3=this;var C=25,J=3;var ab={allowPanToNext:true,spacing:0.12,bgOpacity:1,mouseUsed:false,loop:true,pinchToClose:true,closeOnScroll:true,closeOnVerticalDrag:true,verticalDragRange:0.6,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:false,focus:true,escKey:true,arrowKeys:true,mainScrollEndFriction:0.35,panEndFriction:0.35,isClickableElement:function(p){return p.tagName==="A"},getDoubleTapZoom:function(cw,p){if(cw){return 1}else{return p.initialZoomLevel<0.7?1:1.5}},maxSpreadZoom:2,modal:true,scaleMode:"fit",alwaysFadeIn:false};by.extend(ab,bu);var bL=function(){return{x:0,y:0}};var F,bS,bE,bG,k,Y,T=bL(),ct=bL(),ak=bL(),bF,a9,aH,b2={},bH,bM,aw,ce,E,a4,bo=0,bU={},bI=bL(),ar,o,aV=0,A,bm,I,Q,b9,ag,ad=true,ch,aQ=[],a8,aY,ae,aB,bh,b3,ba,S={},aJ=function(p,cw){by.extend(a3,cw.publicMethods);aQ.push(p)},bz=function(p){var cw=aR();if(p>cw-1){return p-cw}else{if(p<0){return cw+p}}return p},cg={},a7=function(p,cw){if(!cg[p]){cg[p]=[]}return cg[p].push(cw)},an=function(cw){var cy=cg[cw];if(cy){var p=Array.prototype.slice.call(arguments);p.shift();for(var cx=0;cx<cy.length;cx++){cy[cx].apply(a3,p)}}},ao=function(){return new Date().getTime()},d=function(p){aD=p;a3.bg.style.opacity=p*ab.bgOpacity},q=function(cx,p,cy,cw){cx[b9]=aw+p+"px, "+cy+"px"+ce+" scale("+cw+")"},aj=function(){if(bk){q(bk,ak.x,ak.y,bH)}},cs=function(p){if(p.container){q(p.container.style,p.initialPosition.x,p.initialPosition.y,p.initialZoomLevel)}},bR=function(p,cw){cw[b9]=aw+p+"px, 0px"+ce},ac=function(p,cx){if(!ab.loop&&cx){var cw=bG+(bI.x*bo-p)/bI.x;var cy=Math.round(p-aG.x);if((cw<0&&cy>0)||(cw>=aR()-1&&cy<0)){p=aG.x+cy*ab.mainScrollEndFriction}}aG.x=p;bR(p,k)},aM=function(cw,cx){var p=aq[cw]-bU[cw];return ct[cw]+T[cw]+p-p*(cx/bM)},a6=function(cw,p){cw.x=p.x;cw.y=p.y;if(p.id){cw.id=p.id}},D=function(cw){cw.x=Math.round(cw.x);cw.y=Math.round(cw.y)},r=null,aC=function(){if(r){by.unbind(document,"mousemove",aC);by.addClass(a2,"pswp--has_mouse");ab.mouseUsed=true;an("mouseUsed")}r=setTimeout(function(){r=null},100)},b0=function(){by.bind(document,"keydown",a3);if(ba.transform){by.bind(a3.scrollWrap,"click",a3)}if(!ab.mouseUsed){by.bind(document,"mousemove",aC)}by.bind(window,"resize scroll",a3);an("bindEvents")},ap=function(){by.unbind(window,"resize",a3);by.unbind(window,"scroll",aH.scroll);by.unbind(document,"keydown",a3);by.unbind(document,"mousemove",aC);if(ba.transform){by.unbind(a3.scrollWrap,"click",a3)}if(bT){by.unbind(window,bF,a3)}an("unbindEvents")},aI=function(cw,cx){var p=O(a3.currItem,b2,cw);if(cx){cl=p}return p},bZ=function(p){if(!p){p=a3.currItem}return p.initialZoomLevel},P=function(p){if(!p){p=a3.currItem}return p.w>0?ab.maxSpreadZoom:1},cc=function(cx,cy,p,cw){if(cw===a3.currItem.initialZoomLevel){p[cx]=a3.currItem.initialPosition[cx];return true}else{p[cx]=aM(cx,cw);if(p[cx]>cy.min[cx]){p[cx]=cy.min[cx];return true}else{if(p[cx]<cy.max[cx]){p[cx]=cy.max[cx];return true}}}return false},B=function(){if(b9){var p=ba.perspective&&!ch;aw="translate"+(p?"3d(":"(");ce=ba.perspective?", 0px)":")";return}b9="left";by.addClass(a2,"pswp--ie");bR=function(cw,cx){cx.left=cw+"px"};cs=function(cA){var cx=cA.fitRatio>1?1:cA.fitRatio,cz=cA.container.style,cw=cx*cA.w,cy=cx*cA.h;cz.width=cw+"px";cz.height=cy+"px";cz.left=cA.initialPosition.x+"px";cz.top=cA.initialPosition.y+"px"};aj=function(){if(bk){var cz=bk,cA=a3.currItem,cx=cA.fitRatio>1?1:cA.fitRatio,cw=cx*cA.w,cy=cx*cA.h;cz.width=cw+"px";cz.height=cy+"px";cz.left=ak.x+"px";cz.top=ak.y+"px"}}},R=function(cw){var p="";if(ab.escKey&&cw.keyCode===27){p="close"}else{if(ab.arrowKeys){if(cw.keyCode===37){p="prev"}else{if(cw.keyCode===39){p="next"}}}}if(p){if(!cw.ctrlKey&&!cw.altKey&&!cw.shiftKey&&!cw.metaKey){if(cw.preventDefault){cw.preventDefault()}else{cw.returnValue=false}a3[p]()}}},bf=function(p){if(!p){return}if(ah||cn||X||bp){p.preventDefault();p.stopPropagation()}},aW=function(){a3.setScrollOffset(0,by.getScrollY())};var ai={},cj=0,bn=function(p){if(ai[p]){if(ai[p].raf){aY(ai[p].raf)}cj--;delete ai[p]}},w=function(p){if(ai[p]){bn(p)}if(!ai[p]){cj++;ai[p]={}}},a0=function(){for(var p in ai){if(ai.hasOwnProperty(p)){bn(p)}}},ay=function(p,cD,cz,cC,cw,cy,cx){var cB=ao(),cE;w(p);var cA=function(){if(ai[p]){cE=ao()-cB;if(cE>=cC){bn(p);cy(cz);if(cx){cx()}return}cy((cz-cD)*cw(cE/cC)+cD);ai[p].raf=a8(cA)}};cA()};var cm={shout:an,listen:a7,viewportSize:b2,options:ab,isMainScrollAnimating:function(){return X},getZoomLevel:function(){return bH},getCurrentIndex:function(){return bG},isDragging:function(){return bT},isZooming:function(){return bd},setScrollOffset:function(p,cw){bU.x=p;b3=bU.y=cw;an("updateScrollOffset",bU)},applyZoomPan:function(cx,cw,p){ak.x=cw;ak.y=p;bH=cx;aj()},init:function(){if(F||bS){return}var cw;a3.framework=by;a3.template=a2;a3.bg=by.getChildByClass(a2,"pswp__bg");ae=a2.className;F=true;ba=by.detectFeatures();a8=ba.raf;aY=ba.caf;b9=ba.transform;bh=ba.oldIE;a3.scrollWrap=by.getChildByClass(a2,"pswp__scroll-wrap");a3.container=by.getChildByClass(a3.scrollWrap,"pswp__container");k=a3.container.style;a3.itemHolders=ar=[{el:a3.container.children[0],wrap:0,index:-1},{el:a3.container.children[1],wrap:0,index:-1},{el:a3.container.children[2],wrap:0,index:-1}];ar[0].el.style.display=ar[2].el.style.display="none";B();aH={resize:a3.updateSize,scroll:aW,keydown:R,click:bf};var cy=ba.isOldIOSPhone||ba.isOldAndroid||ba.isMobileOpera;if(!ba.animationName||!ba.transform||cy){ab.showAnimationDuration=ab.hideAnimationDuration=0}for(cw=0;cw<aQ.length;cw++){a3["init"+aQ[cw]]()}if(bt){var cx=a3.ui=new bt(a3,by);cx.init()}an("firstUpdate");bG=bG||ab.index||0;if(isNaN(bG)||bG<0||bG>=aR()){bG=0}a3.currItem=bB(bG);if(ba.isOldIOSPhone||ba.isOldAndroid){ad=false}a2.setAttribute("aria-hidden","false");if(ab.modal){if(!ad){a2.style.position="absolute";a2.style.top=by.getScrollY()+"px"}else{a2.style.position="fixed"}}if(b3===undefined){an("initialLayout");b3=aB=by.getScrollY()}var p="pswp--open ";if(ab.mainClass){p+=ab.mainClass+" "}if(ab.showHideOpacity){p+="pswp--animate_opacity "}p+=ch?"pswp--touch":"pswp--notouch";p+=ba.animationName?" pswp--css_animation":"";p+=ba.svg?" pswp--svg":"";by.addClass(a2,p);a3.updateSize();Y=-1;aV=null;for(cw=0;cw<J;cw++){bR((cw+Y)*bI.x,ar[cw].el.style)}if(!bh){by.bind(a3.scrollWrap,a9,a3)}a7("initialZoomInEnd",function(){a3.setContent(ar[0],bG-1);a3.setContent(ar[2],bG+1);ar[0].el.style.display=ar[2].el.style.display="block";if(ab.focus){a2.focus()}b0()});a3.setContent(ar[1],bG);a3.updateCurrItem();an("afterInit");if(!ad){E=setInterval(function(){if(!cj&&!bT&&!bd&&(bH===a3.currItem.initialZoomLevel)){a3.updateSize()}},1000)}by.addClass(a2,"pswp--visible")},close:function(){if(!F){return}F=false;bS=true;an("close");ap();aK(a3.currItem,null,true,a3.destroy)},destroy:function(){an("destroy");if(b8){clearTimeout(b8)}a2.setAttribute("aria-hidden","true");a2.className=ae;if(E){clearInterval(E)}by.unbind(a3.scrollWrap,a9,a3);by.unbind(window,"scroll",a3);ci();a0();cg=null},panTo:function(p,cx,cw){if(!cw){if(p>cl.min.x){p=cl.min.x}else{if(p<cl.max.x){p=cl.max.x}}if(cx>cl.min.y){cx=cl.min.y}else{if(cx<cl.max.y){cx=cl.max.y}}}ak.x=p;ak.y=cx;aj()},handleEvent:function(p){p=p||window.event;if(aH[p.type]){aH[p.type](p)}},goTo:function(p){p=bz(p);var cw=p-bG;aV=cw;bG=p;a3.currItem=bB(bG);bo-=cw;ac(bI.x*bo);a0();X=false;a3.updateCurrItem()},next:function(){a3.goTo(bG+1)},prev:function(){a3.goTo(bG-1)},updateCurrZoomItem:function(p){if(p){an("beforeChange",0)}if(ar[1].el.children.length){var cw=ar[1].el.children[0];if(by.hasClass(cw,"pswp__zoom-wrap")){bk=cw.style}else{bk=null}}else{bk=null}cl=a3.currItem.bounds;bM=bH=a3.currItem.initialZoomLevel;ak.x=cl.center.x;ak.y=cl.center.y;if(p){an("afterChange")}},invalidateCurrItems:function(){a4=true;for(var p=0;p<J;p++){if(ar[p].item){ar[p].item.needsUpdate=true}}},updateCurrItem:function(cw){if(aV===0){return}var cz=Math.abs(aV),cy;if(cw&&cz<2){return}a3.currItem=bB(bG);an("beforeChange",aV);if(cz>=J){Y+=aV+(aV>0?-J:J);cz=J}for(var cx=0;cx<cz;cx++){if(aV>0){cy=ar.shift();ar[J-1]=cy;Y++;bR((Y+2)*bI.x,cy.el.style);a3.setContent(cy,bG-cz+cx+1+1)}else{cy=ar.pop();ar.unshift(cy);Y--;bR(Y*bI.x,cy.el.style);a3.setContent(cy,bG+cz-cx-1-1)}}if(bk&&Math.abs(aV)===1){var p=bB(o);if(p.initialZoomLevel!==bH){O(p,b2);cs(p)}}aV=0;a3.updateCurrZoomItem();o=bG;an("afterChange")},updateSize:function(cA){if(!ad&&ab.modal){var cx=by.getScrollY();if(b3!==cx){a2.style.top=cx+"px";b3=cx}if(!cA&&S.x===window.innerWidth&&S.y===window.innerHeight){return}S.x=window.innerWidth;S.y=window.innerHeight;a2.style.height=S.y+"px"}b2.x=a3.scrollWrap.clientWidth;b2.y=a3.scrollWrap.clientHeight;aW();bI.x=b2.x+Math.round(b2.x*ab.spacing);bI.y=b2.y;ac(bI.x*bo);an("beforeResize");if(Y!==undefined){var cw,cz,cy;for(var p=0;p<J;p++){cw=ar[p];bR((p+Y)*bI.x,cw.el.style);cy=bG+p-1;if(ab.loop&&aR()>2){cy=bz(cy)}cz=bB(cy);if(cz&&(a4||cz.needsUpdate||!cz.bounds)){a3.cleanSlide(cz);a3.setContent(cw,cy);if(p===1){a3.currItem=cz;a3.updateCurrZoomItem(true)}cz.needsUpdate=false}else{if(cw.index===-1&&cy>=0){a3.setContent(cw,cy)}}if(cz&&cz.container){O(cz,b2);cs(cz)}}a4=false}bM=bH=a3.currItem.initialZoomLevel;cl=a3.currItem.bounds;if(cl){ak.x=cl.center.x;ak.y=cl.center.y;aj()}an("resize")},zoomTo:function(cD,cA,cx,p,cz){if(cA){bM=bH;aq.x=Math.abs(cA.x)-ak.x;aq.y=Math.abs(cA.y)-ak.y;a6(ct,ak)}var cy=aI(cD,false),cB={};cc("x",cy,cB,cD);cc("y",cy,cB,cD);var cE=bH;var cC={x:ak.x,y:ak.y};D(cB);var cw=function(cF){if(cF===1){bH=cD;ak.x=cB.x;ak.y=cB.y}else{bH=(cD-cE)*cF+cE;ak.x=(cB.x-cC.x)*cF+cC.x;ak.y=(cB.y-cC.y)*cF+cC.y}if(cz){cz(cF)}aj()};if(cx){ay("customZoomTo",0,1,cx,p||by.easing.sine.inOut,cw)}else{cw(1)}}};var aE=30,V=10;var c,aA,bC={},bV={},l={},bc={},cd={},bb=[],co={},az,y=[],bW={},s,bp,af,cf=0,i=bL(),al=0,bT,bs,cn,ah,bN,K,au,bd,L,N,cl,aG=bL(),bk,X,aq=bL(),h=bL(),bi,at,aP,aD,b,U=function(cw,p){return cw.x===p.x&&cw.y===p.y},bO=function(cw,p){return Math.abs(cw.x-p.x)<C&&Math.abs(cw.y-p.y)<C},aN=function(cw,p){bW.x=Math.abs(cw.x-p.x);bW.y=Math.abs(cw.y-p.y);return Math.sqrt(bW.x*bW.x+bW.y*bW.y)},ci=function(){if(bN){aY(bN);bN=null}},cq=function(){if(bT){bN=a8(cq);b7()}},cv=function(){return !(ab.scaleMode==="fit"&&bH===a3.currItem.initialZoomLevel)},a5=function(cw,p){if(!cw){return false}if(cw.className&&cw.className.indexOf("pswp__scroll-wrap")>-1){return false}if(p(cw)){return cw}return a5(cw.parentNode,p)},e={},be=function(cw,p){e.prevent=!a5(cw.target,ab.isClickableElement);an("preventDragEvent",cw,p,e);return e.prevent},bP=function(cx,cw){cw.x=cx.pageX;cw.y=cx.pageY;cw.id=cx.identifier;return cw},n=function(cx,cw,p){p.x=(cx.x+cw.x)*0.5;p.y=(cx.y+cw.y)*0.5},bA=function(cw,p,cy){if(cw-aA>50){var cx=y.length>2?y.shift():{};cx.x=p;cx.y=cy;y.push(cx);aA=cw}},m=function(){var p=ak.y-a3.currItem.initialPosition.y;return 1-Math.abs(p/(b2.y/2))},cb={},ca={},bQ=[],av,aU=function(p){while(bQ.length>0){bQ.pop()}if(!ag){if(p.type.indexOf("touch")>-1){if(p.touches&&p.touches.length>0){bQ[0]=bP(p.touches[0],cb);if(p.touches.length>1){bQ[1]=bP(p.touches[1],ca)}}}else{cb.x=p.pageX;cb.y=p.pageY;cb.id="";bQ[0]=cb}}else{av=0;bb.forEach(function(cw){if(av===0){bQ[0]=cw}else{if(av===1){bQ[1]=cw}}av++})}return bQ},g=function(cw,cF){var cy,cC=0,cD=ak[cw]+cF[cw],cA,cx=cF[cw]>0,cE=aG.x+cF.x,cz=aG.x-co.x,p,cB;if(cD>cl.min[cw]||cD<cl.max[cw]){cy=ab.panEndFriction}else{cy=1}cD=ak[cw]+cF[cw]*cy;if(ab.allowPanToNext||bH===a3.currItem.initialZoomLevel){if(!bk){cB=cE}else{if(bi==="h"&&cw==="x"&&!cn){if(cx){if(cD>cl.min[cw]){cy=ab.panEndFriction;cC=cl.min[cw]-cD;cA=cl.min[cw]-ct[cw]}if((cA<=0||cz<0)&&aR()>1){cB=cE;if(cz<0&&cE>co.x){cB=co.x}}else{if(cl.min.x!==cl.max.x){p=cD}}}else{if(cD<cl.max[cw]){cy=ab.panEndFriction;cC=cD-cl.max[cw];cA=ct[cw]-cl.max[cw]}if((cA<=0||cz>0)&&aR()>1){cB=cE;if(cz>0&&cE<co.x){cB=co.x}}else{if(cl.min.x!==cl.max.x){p=cD}}}}}if(cw==="x"){if(cB!==undefined){ac(cB,true);if(cB===co.x){K=false}else{K=true}}if(cl.min.x!==cl.max.x){if(p!==undefined){ak.x=p}else{if(!K){ak.x+=cF.x*cy}}}return cB!==undefined}}if(!X){if(!K){if(bH>a3.currItem.fitRatio){ak[cw]+=cF[cw]*cy}}}},bY=function(cy){if(cy.type==="mousedown"&&cy.button>0){return}if(bv){cy.preventDefault();return}if(af&&cy.type==="mousedown"){return}if(be(cy,true)){cy.preventDefault()}an("pointerDown");if(ag){var cw=by.arraySearch(bb,cy.pointerId,"id");if(cw<0){cw=bb.length}bb[cw]={x:cy.pageX,y:cy.pageY,id:cy.pointerId}}var p=aU(cy),cx=p.length;au=null;a0();if(!bT||cx===1){bT=at=true;by.bind(window,bF,a3);s=b=aP=bp=K=ah=bs=cn=false;bi=null;an("firstTouchStart",p);a6(ct,ak);T.x=T.y=0;a6(bc,p[0]);a6(cd,bc);co.x=bI.x*bo;y=[{x:bc.x,y:bc.y}];aA=c=ao();aI(bH,true);ci();cq()}if(!bd&&cx>1&&!X&&!K){bM=bH;cn=false;bd=bs=true;T.y=T.x=0;a6(ct,ak);a6(bC,p[0]);a6(bV,p[1]);n(bC,bV,h);aq.x=Math.abs(h.x)-ak.x;aq.y=Math.abs(h.y)-ak.y;L=N=aN(bC,bV)}},aL=function(cA){cA.preventDefault();if(ag){var cw=by.arraySearch(bb,cA.pointerId,"id");if(cw>-1){var cz=bb[cw];cz.x=cA.pageX;cz.y=cA.pageY}}if(bT){var cx=aU(cA);if(!bi&&!ah&&!bd){var cy=Math.abs(cx[0].x-bc.x)-Math.abs(cx[0].y-bc.y);if(Math.abs(cy)>=V){bi=cy>0?"h":"v";au=cx}}else{au=cx}}},b7=function(){if(!au){return}var cD=au.length;if(cD===0){return}a6(bC,au[0]);l.x=bC.x-bc.x;l.y=bC.y-bc.y;if(bd&&cD>1){bc.x=bC.x;bc.y=bC.y;if(!l.x&&!l.y&&U(au[1],bV)){return}a6(bV,au[1]);if(!cn){cn=true;an("zoomGestureStarted")}var cy=aN(bC,bV);var cA=G(cy);if(cA>a3.currItem.initialZoomLevel+a3.currItem.initialZoomLevel/15){b=true}var cC=1,cE=bZ(),cw=P();if(cA<cE){if(ab.pinchToClose&&!b&&bM<=a3.currItem.initialZoomLevel){var p=cE-cA;var cB=1-p/(cE/1.2);d(cB);an("onPinchClose",cB);aP=true}else{cC=(cE-cA)/cE;if(cC>1){cC=1}cA=cE-cC*(cE/3)}}else{if(cA>cw){cC=(cA-cw)/(cE*6);if(cC>1){cC=1}cA=cw+cC*cE}}if(cC<0){cC=0}L=cy;n(bC,bV,i);T.x+=i.x-h.x;T.y+=i.y-h.y;a6(h,i);ak.x=aM("x",cA);ak.y=aM("y",cA);s=cA>bH;bH=cA;aj()}else{if(!bi){return}if(at){at=false;if(Math.abs(l.x)>=V){l.x-=au[0].x-cd.x}if(Math.abs(l.y)>=V){l.y-=au[0].y-cd.y}}bc.x=bC.x;bc.y=bC.y;if(l.x===0&&l.y===0){return}if(bi==="v"&&ab.closeOnVerticalDrag){if(!cv()){T.y+=l.y;ak.y+=l.y;var cz=m();bp=true;an("onVerticalDrag",cz);d(cz);aj();return}}bA(ao(),bC.x,bC.y);ah=true;cl=a3.currItem.bounds;var cx=g("x",l);if(!cx){g("y",l);D(ak);aj()}}},H=function(cD){if(ba.isOldAndroid){if(af&&cD.type==="mouseup"){return}if(cD.type.indexOf("touch")>-1){clearTimeout(af);af=setTimeout(function(){af=0},600)}}an("pointerUp");if(be(cD,false)){cD.preventDefault()}var cx;if(ag){var cy=by.arraySearch(bb,cD.pointerId,"id");if(cy>-1){cx=bb.splice(cy,1)[0];if(navigator.pointerEnabled){cx.type=cD.pointerType||"mouse"}else{var cC={4:"mouse",2:"touch",3:"pen"};cx.type=cC[cD.pointerType];if(!cx.type){cx.type=cD.pointerType||"mouse"}}}}var cw=aU(cD),p,cE=cw.length;if(cD.type==="mouseup"){cE=0}if(cE===2){au=null;return true}if(cE===1){a6(cd,cw[0])}if(cE===0&&!bi&&!X){if(!cx){if(cD.type==="mouseup"){cx={x:cD.pageX,y:cD.pageY,type:"mouse"}}else{if(cD.changedTouches&&cD.changedTouches[0]){cx={x:cD.changedTouches[0].pageX,y:cD.changedTouches[0].pageY,type:"touch"}}}}an("touchRelease",cD,cx)}var cG=-1;if(cE===0){bT=false;by.unbind(window,bF,a3);ci();if(bd){cG=0}else{if(al!==-1){cG=ao()-al}}}al=cE===1?ao():-1;if(cG!==-1&&cG<150){p="zoom"}else{p="swipe"}if(bd&&cE<2){bd=false;if(cE===1){p="zoomPointerUp"}an("zoomGestureEnded")}au=null;if(!ah&&!cn&&!X&&!bp){return}a0();if(!az){az=b6()}az.calculateSwipeSpeed("x");if(bp){var cz=m();if(cz<ab.verticalDragRange){a3.close()}else{var cA=ak.y,cF=aD;ay("verticalDrag",0,1,300,by.easing.cubic.out,function(cH){ak.y=(a3.currItem.initialPosition.y-cA)*cH+cA;d((1-cF)*cH+cF);aj()});an("onVerticalDrag",1)}return}if((K||X)&&cE===0){var cB=aa(p,az);if(cB){return}p="zoomPointerUp"}if(X){return}if(p!=="swipe"){z();return}if(!K&&bH>a3.currItem.fitRatio){aX(az)}},b6=function(){var cx,cw;var p={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(cy){if(y.length>1){cx=ao()-aA+50;cw=y[y.length-2][cy]}else{cx=ao()-c;cw=cd[cy]}p.lastFlickOffset[cy]=bc[cy]-cw;p.lastFlickDist[cy]=Math.abs(p.lastFlickOffset[cy]);if(p.lastFlickDist[cy]>20){p.lastFlickSpeed[cy]=p.lastFlickOffset[cy]/cx}else{p.lastFlickSpeed[cy]=0}if(Math.abs(p.lastFlickSpeed[cy])<0.1){p.lastFlickSpeed[cy]=0}p.slowDownRatio[cy]=0.95;p.slowDownRatioReverse[cy]=1-p.slowDownRatio[cy];p.speedDecelerationRatio[cy]=1},calculateOverBoundsAnimOffset:function(cy,cz){if(!p.backAnimStarted[cy]){if(ak[cy]>cl.min[cy]){p.backAnimDestination[cy]=cl.min[cy]}else{if(ak[cy]<cl.max[cy]){p.backAnimDestination[cy]=cl.max[cy]}}if(p.backAnimDestination[cy]!==undefined){p.slowDownRatio[cy]=0.7;p.slowDownRatioReverse[cy]=1-p.slowDownRatio[cy];if(p.speedDecelerationRatioAbs[cy]<0.05){p.lastFlickSpeed[cy]=0;p.backAnimStarted[cy]=true;ay("bounceZoomPan"+cy,ak[cy],p.backAnimDestination[cy],cz||300,by.easing.sine.out,function(cA){ak[cy]=cA;aj()})}}}},calculateAnimOffset:function(cy){if(!p.backAnimStarted[cy]){p.speedDecelerationRatio[cy]=p.speedDecelerationRatio[cy]*(p.slowDownRatio[cy]+p.slowDownRatioReverse[cy]-p.slowDownRatioReverse[cy]*p.timeDiff/10);p.speedDecelerationRatioAbs[cy]=Math.abs(p.lastFlickSpeed[cy]*p.speedDecelerationRatio[cy]);p.distanceOffset[cy]=p.lastFlickSpeed[cy]*p.speedDecelerationRatio[cy]*p.timeDiff;ak[cy]+=p.distanceOffset[cy]}},panAnimLoop:function(){if(ai.zoomPan){ai.zoomPan.raf=a8(p.panAnimLoop);p.now=ao();p.timeDiff=p.now-p.lastNow;p.lastNow=p.now;p.calculateAnimOffset("x");p.calculateAnimOffset("y");aj();p.calculateOverBoundsAnimOffset("x");p.calculateOverBoundsAnimOffset("y");if(p.speedDecelerationRatioAbs.x<0.05&&p.speedDecelerationRatioAbs.y<0.05){ak.x=Math.round(ak.x);ak.y=Math.round(ak.y);aj();bn("zoomPan");return}}}};return p},aX=function(p){p.calculateSwipeSpeed("y");cl=a3.currItem.bounds;p.backAnimDestination={};p.backAnimStarted={};if(Math.abs(p.lastFlickSpeed.x)<=0.05&&Math.abs(p.lastFlickSpeed.y)<=0.05){p.speedDecelerationRatioAbs.x=p.speedDecelerationRatioAbs.y=0;p.calculateOverBoundsAnimOffset("x");p.calculateOverBoundsAnimOffset("y");return true}w("zoomPan");p.lastNow=ao();p.panAnimLoop()},aa=function(p,cx){var cy;if(!X){cf=bG}var cw;if(p==="swipe"){var cC=bc.x-cd.x,cB=cx.lastFlickDist.x<10;if(cC>aE&&(cB||cx.lastFlickOffset.x>20)){cw=-1}else{if(cC<-aE&&(cB||cx.lastFlickOffset.x<-20)){cw=1}}}var cA;if(cw){bG+=cw;if(bG<0){bG=ab.loop?aR()-1:0;cA=true}else{if(bG>=aR()){bG=ab.loop?0:aR()-1;cA=true}}if(!cA||ab.loop){aV+=cw;bo-=cw;cy=true}}var cD=bI.x*bo;var cz=Math.abs(cD-aG.x);var cE;if(!cy&&cD>aG.x!==cx.lastFlickSpeed.x>0){cE=333}else{cE=Math.abs(cx.lastFlickSpeed.x)>0?cz/Math.abs(cx.lastFlickSpeed.x):333;cE=Math.min(cE,400);cE=Math.max(cE,250)}if(cf===bG){cy=false}X=true;an("mainScrollAnimStart");ay("mainScroll",aG.x,cD,cE,by.easing.cubic.out,ac,function(){a0();X=false;cf=-1;if(cy||cf!==bG){a3.updateCurrItem()}an("mainScrollAnimComplete")});if(cy){a3.updateCurrItem(true)}return cy},G=function(p){return 1/N*p*bM},z=function(){var cx=bH,cA=bZ(),p=P();if(bH<cA){cx=cA}else{if(bH>p){cx=p}}var cz=1,cw,cy=aD;if(aP&&!s&&!b&&bH<cA){a3.close();return true}if(aP){cw=function(cB){d((cz-cy)*cB+cy)}}a3.zoomTo(cx,0,300,by.easing.cubic.out,cw);return true};aJ("Gestures",{publicMethods:{initGestures:function(){var p=function(cx,cA,cy,cw,cz){A=cx+cA;bm=cx+cy;I=cx+cw;if(cz){Q=cx+cz}else{Q=""}};ag=ba.pointerEvent;if(ag&&ba.touch){ba.touch=false}if(ag){if(navigator.pointerEnabled){p("pointer","down","move","up","cancel")}else{p("MSPointer","Down","Move","Up","Cancel")}}else{if(ba.touch){p("touch","start","move","end","cancel");ch=true}else{p("mouse","down","move","up")}}bF=bm+" "+I+" "+Q;a9=A;if(ag&&!ch){ch=(navigator.maxTouchPoints>1)||(navigator.msMaxTouchPoints>1)}a3.likelyTouchDevice=ch;aH[A]=bY;aH[bm]=aL;aH[I]=H;if(Q){aH[Q]=aH[I]}if(ba.touch){a9+=" mousedown";bF+=" mousemove mouseup";aH.mousedown=aH[A];aH.mousemove=aH[bm];aH.mouseup=aH[I]}if(!ch){ab.allowPanToNext=false}}}});var b8,aK=function(cD,cy,cx,cC){if(b8){clearTimeout(b8)}bv=true;bJ=true;var cB;if(cD.initialLayout){cB=cD.initialLayout;cD.initialLayout=null}else{cB=ab.getThumbBoundsFn&&ab.getThumbBoundsFn(bG)}var cw=cx?ab.hideAnimationDuration:ab.showAnimationDuration;var p=function(){bn("initialZoom");if(!cx){d(1);if(cy){cy.style.display="block"}by.addClass(a2,"pswp--animated-in");an("initialZoom"+(cx?"OutEnd":"InEnd"))}else{a3.template.removeAttribute("style");a3.bg.removeAttribute("style")}if(cC){cC()}bv=false};if(!cw||!cB||cB.x===undefined){var cA=function(){an("initialZoom"+(cx?"Out":"In"));bH=cD.initialZoomLevel;a6(ak,cD.initialPosition);aj();a2.style.opacity=cx?0:1;d(1);p()};cA();return}var cz=function(){var cF=bE,cE=!a3.currItem.src||a3.currItem.loadError||ab.showHideOpacity;if(cD.miniImg){cD.miniImg.style.webkitBackfaceVisibility="hidden"}if(!cx){bH=cB.w/cD.w;ak.x=cB.x;ak.y=cB.y-aB;a3[cE?"template":"bg"].style.opacity=0.001;aj()}w("initialZoom");if(cx&&!cF){by.removeClass(a2,"pswp--animated-in")}if(cE){if(cx){by[(cF?"remove":"add")+"Class"](a2,"pswp--animate_opacity")}else{setTimeout(function(){by.addClass(a2,"pswp--animate_opacity")},30)}}b8=setTimeout(function(){an("initialZoom"+(cx?"Out":"In"));if(!cx){bH=cD.initialZoomLevel;a6(ak,cD.initialPosition);aj();d(1);if(cE){a2.style.opacity=1}else{d(1)}b8=setTimeout(p,cw+20)}else{var cH=cB.w/cD.w,cJ={x:ak.x,y:ak.y},cK=bH,cI=aD,cG=function(cL){if(cL===1){bH=cH;ak.x=cB.x;ak.y=cB.y-b3}else{bH=(cH-cK)*cL+cK;ak.x=(cB.x-cJ.x)*cL+cJ.x;ak.y=(cB.y-b3-cJ.y)*cL+cJ.y}aj();if(cE){a2.style.opacity=1-cL}else{d(cI-cL*cI)}};if(cF){ay("initialZoom",0,1,cw,by.easing.cubic.out,cG,p)}else{cG(1);b8=setTimeout(p,cw+20)}}},cx?25:90)};cz()};var aT,aS={},v=[],bJ,bv,b5={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:false,preload:[1,1],getNumItemsFn:function(){return aT.length}};var bB,aR,x,bj=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},aZ=function(cy,p,cx){var cw=cy.bounds;cw.center.x=Math.round((aS.x-p)/2);cw.center.y=Math.round((aS.y-cx)/2)+cy.vGap.top;cw.max.x=(p>aS.x)?Math.round(aS.x-p):cw.center.x;cw.max.y=(cx>aS.y)?Math.round(aS.y-cx)+cy.vGap.top:cw.center.y;cw.min.x=(p>aS.x)?0:cw.center.x;cw.min.y=(cx>aS.y)?cy.vGap.top:cw.center.y},O=function(cy,p,cB){if(cy.src&&!cy.loadError){var cz=!cB;if(cz){if(!cy.vGap){cy.vGap={top:0,bottom:0}}an("parseVerticalMargin",cy)}aS.x=p.x;aS.y=p.y-cy.vGap.top-cy.vGap.bottom;if(cz){var cA=aS.x/cy.w;var cx=aS.y/cy.h;cy.fitRatio=cA<cx?cA:cx;var cw=ab.scaleMode;if(cw==="orig"){cB=1}else{if(cw==="fit"){cB=cy.fitRatio}}if(cB>1){cB=1}cy.initialZoomLevel=cB;if(!cy.bounds){cy.bounds=bj()}}if(!cB){return}aZ(cy,cy.w*cB,cy.h*cB);if(cz&&cB===cy.initialZoomLevel){cy.initialPosition=cy.bounds.center}return cy.bounds}else{cy.w=cy.h=0;cy.initialZoomLevel=cy.fitRatio=1;cy.bounds=bj();cy.initialPosition=cy.bounds.center;return cy.bounds}return false},bg=function(cA,cC,cB,cy,cx,p){if(cC.loadError){return}var cw,cD=a3.isDragging()&&!a3.isZooming(),cz=cA===bG||a3.isMainScrollAnimating()||cD;if(!cx&&(ch||ab.alwaysFadeIn)&&cz){cw=true}if(cy){if(cw){cy.style.opacity=0}cC.imageAppended=true;bx(cy,cC.w,cC.h);cB.appendChild(cy);if(cw){setTimeout(function(){cy.style.opacity=1;if(p){setTimeout(function(){if(cC&&cC.loaded&&cC.placeholder){cC.placeholder.style.display="none";cC.placeholder=null}},500)}},50)}}},aO=function(cw){cw.loading=true;cw.loaded=false;var p=cw.img=by.createEl("pswp__img","img");var cx=function(){cw.loading=false;cw.loaded=true;if(cw.loadComplete){cw.loadComplete(cw)}else{cw.img=null}p.onload=p.onerror=null;p=null};p.onload=cx;p.onerror=function(){cw.loadError=true;cx()};p.src=cw.src;return p},br=function(p,cw){if(p.src&&p.loadError&&p.container){if(cw){p.container.innerHTML=""}p.container.innerHTML=ab.errorMsg.replace("%url%",p.src);return true}},bx=function(cw,p,cx){cw.style.width=p+"px";cw.style.height=cx+"px"},t=function(){if(v.length){var p;for(var cw=0;cw<v.length;cw++){p=v[cw];if(p.holder.index===p.index){bg(p.index,p.item,p.baseDiv,p.img)}}v=[]}};aJ("Controller",{publicMethods:{lazyLoadItem:function(p){p=bz(p);var cw=bB(p);if(!cw||cw.loaded||cw.loading){return}an("gettingData",p,cw);if(!cw.src){return}aO(cw)},initController:function(){by.extend(ab,b5,true);a3.items=aT=cp;bB=a3.getItemAt;aR=ab.getNumItemsFn;x=ab.loop;if(aR()<3){ab.loop=false}a7("beforeChange",function(cB){var cA=ab.preload,cx=cB===null?true:(cB>0),cy=Math.min(cA[0],aR()),cz=Math.min(cA[1],aR()),cw;for(cw=1;cw<=(cx?cz:cy);cw++){a3.lazyLoadItem(bG+cw)}for(cw=1;cw<=(cx?cy:cz);cw++){a3.lazyLoadItem(bG-cw)}});a7("initialLayout",function(){a3.currItem.initialLayout=ab.getThumbBoundsFn&&ab.getThumbBoundsFn(bG)});a7("mainScrollAnimComplete",t);a7("initialZoomInEnd",t);a7("destroy",function(){var cw;for(var p=0;p<aT.length;p++){cw=aT[p];if(cw.container){cw.container=null}if(cw.placeholder){cw.placeholder=null}if(cw.img){cw.img=null}if(cw.preloader){cw.preloader=null}if(cw.loadError){cw.loaded=cw.loadError=false}}v=null})},getItemAt:function(p){if(p>=0){return aT[p]!==undefined?aT[p]:false}return false},allowProgressiveImg:function(){return ab.forceProgressiveLoading||!ch||ab.mouseUsed||screen.width>1200},setContent:function(cA,cz){if(ab.loop){cz=bz(cz)}var cw=a3.getItemAt(cA.index);if(cw){cw.container=null}var cB=a3.getItemAt(cz),cy;if(!cB){cA.el.innerHTML="";return}an("gettingData",cz,cB);cA.index=cz;cA.item=cB;var cx=cB.container=by.createEl("pswp__zoom-wrap");if(!cB.src&&cB.html){if(cB.html.tagName){cx.appendChild(cB.html)}else{cx.innerHTML=cB.html}}br(cB);if(cB.src&&!cB.loadError&&!cB.loaded){cB.loadComplete=function(cD){if(!F){return}if(cD.img){cD.img.style.webkitBackfaceVisibility="hidden"}if(cA&&cA.index===cz){if(br(cD,true)){cD.loadComplete=cD.img=null;O(cD,b2);cs(cD);if(cA.index===bG){a3.updateCurrZoomItem()}return}if(!cD.imageAppended){if(ba.transform&&(X||bv)){v.push({item:cD,baseDiv:cx,img:cD.img,index:cz,holder:cA})}else{bg(cz,cD,cx,cD.img,X||bv)}}else{if(!bv&&cD.placeholder){cD.placeholder.style.display="none";cD.placeholder=null}}}cD.loadComplete=null;cD.img=null;an("imageLoadComplete",cz,cD)};if(by.features.transform){var p="pswp__img pswp__img--placeholder";p+=(cB.msrc?"":" pswp__img--placeholder--blank");var cC=by.createEl(p,cB.msrc?"img":"");if(cB.msrc){cC.src=cB.msrc}bx(cC,cB.w,cB.h);cx.appendChild(cC);cB.placeholder=cC}if(!cB.loading){aO(cB)}if(a3.allowProgressiveImg()){if(!bJ&&ba.transform){v.push({item:cB,baseDiv:cx,img:cB.img,index:cz,holder:cA})}else{bg(cz,cB,cx,cB.img,true,true)}}}else{if(cB.src&&!cB.loadError){cy=by.createEl("pswp__img","img");cy.style.webkitBackfaceVisibility="hidden";cy.style.opacity=1;cy.src=cB.src;bx(cy,cB.w,cB.h);bg(cz,cB,cx,cy,true)}}O(cB,b2);if(!bJ&&cz===bG){bk=cx.style;aK(cB,(cy||cB.img))}else{cs(cB)}cA.el.innerHTML="";cA.el.appendChild(cx)},cleanSlide:function(p){if(p.img){p.img.onload=p.img.onerror=null}p.loaded=p.loading=p.img=p.imageAppended=false}}});var bw,W={},u=function(cw,cz,p){var cy=document.createEvent("CustomEvent"),cx={origEvent:cw,target:cw.target,releasePoint:cz,pointerType:p||"touch"};cy.initCustomEvent("pswpTap",true,true,cx);cw.target.dispatchEvent(cy)};aJ("Tap",{publicMethods:{initTap:function(){a7("firstTouchStart",a3.onTapStart);a7("touchRelease",a3.onTapRelease);a7("destroy",function(){W={};bw=null})},onTapStart:function(p){if(p.length>1){clearTimeout(bw);bw=null}},onTapRelease:function(cw,cx){if(!cx){return}if(!ah&&!bs&&!cj){var cy=cx;if(bw){clearTimeout(bw);bw=null;if(bO(cy,W)){an("doubleTap",cy);return}}if(cx.type==="mouse"){u(cw,cx,"mouse");return}var p=cw.target.tagName.toUpperCase();if(p==="BUTTON"||by.hasClass(cw.target,"pswp__single-tap")){u(cw,cx);return}a6(W,cy);bw=setTimeout(function(){u(cw,cx);bw=null},300)}}}});var f;aJ("DesktopZoom",{publicMethods:{initDesktopZoom:function(){if(bh){return}if(ch){a7("mouseUsed",function(){a3.setupDesktopZoom()})}else{a3.setupDesktopZoom(true)}},setupDesktopZoom:function(cx){f={};var p="wheel mousewheel DOMMouseScroll";a7("bindEvents",function(){by.bind(a2,p,a3.handleMouseWheel)});a7("unbindEvents",function(){if(f){by.unbind(a2,p,a3.handleMouseWheel)}});a3.mouseZoomedIn=false;var cz,cy=function(){if(a3.mouseZoomedIn){by.removeClass(a2,"pswp--zoomed-in");a3.mouseZoomedIn=false}if(bH<1){by.addClass(a2,"pswp--zoom-allowed")}else{by.removeClass(a2,"pswp--zoom-allowed")}cw()},cw=function(){if(cz){by.removeClass(a2,"pswp--dragging");cz=false}};a7("resize",cy);a7("afterChange",cy);a7("pointerDown",function(){if(a3.mouseZoomedIn){cz=true;by.addClass(a2,"pswp--dragging")}});a7("pointerUp",cw);if(!cx){cy()}},handleMouseWheel:function(p){if(bH<=a3.currItem.fitRatio){if(ab.modal){if(!ab.closeOnScroll){p.preventDefault()}else{if(b9&&Math.abs(p.deltaY)>2){bE=true;a3.close()}}}return true}p.stopPropagation();f.x=0;if("deltaX" in p){if(p.deltaMode===1){f.x=p.deltaX*18;f.y=p.deltaY*18}else{f.x=p.deltaX;f.y=p.deltaY}}else{if("wheelDelta" in p){if(p.wheelDeltaX){f.x=-0.16*p.wheelDeltaX}if(p.wheelDeltaY){f.y=-0.16*p.wheelDeltaY}else{f.y=-0.16*p.wheelDelta}}else{if("detail" in p){f.y=p.detail}else{return}}}aI(bH,true);var cx=ak.x-f.x,cw=ak.y-f.y;if(ab.modal||(cx<=cl.min.x&&cx>=cl.max.x&&cw<=cl.min.y&&cw>=cl.max.y)){p.preventDefault()}a3.panTo(cx,cw)},toggleDesktopZoom:function(cx){cx=cx||{x:b2.x/2+bU.x,y:b2.y/2+bU.y};var cw=ab.getDoubleTapZoom(true,a3.currItem);var p=bH===cw;a3.mouseZoomedIn=!p;a3.zoomTo(p?a3.currItem.initialZoomLevel:cw,cx,333);by[(!p?"add":"remove")+"Class"](a2,"pswp--zoomed-in")}}});var a1={history:true,galleryUID:1};var b1,bD,bX,Z,cu,am,bq,bK,b4,ax,bl,j,M=function(){return bl.hash.substring(1)},cr=function(){if(b1){clearTimeout(b1)}if(bX){clearTimeout(bX)}},ck=function(){var cx=M(),p={};if(ab.urlPattern){var cC=ab.urlPattern.replace("[gid]",ab.galleryUID).replace("[pid]","([0-9a-z]+?)");var cz=window.location.pathname.match(new RegExp(cC));if(cz){var cA=cz[1];for(cy=0;cy<aT.length;cy++){if(aT[cy].pid==cA){p.pid=cy;break}}return p}}if(cx.length<5){return p}var cy,cB=cx.split("&");for(cy=0;cy<cB.length;cy++){if(!cB[cy]){continue}var cw=cB[cy].split("=");if(cw.length<2){continue}p[cw[0]]=cw[1]}if(ab.galleryPIDs){var cD=p.pid;p.pid=0;for(cy=0;cy<aT.length;cy++){if(aT[cy].pid===cD){p.pid=cy;break}}}else{p.pid=parseInt(p.pid,10)-1}if(p.pid<0){p.pid=0}return p},aF=function(){if(bX){clearTimeout(bX)}if(cj||bT){bX=setTimeout(aF,500);return}if(Z){clearTimeout(bD)}else{Z=true}var cw=(bG+1);var cz=bB(bG);if(cz.hasOwnProperty("pid")){cw=cz.pid}var cy=bq+"&gid="+ab.galleryUID+"&pid="+cw;if(!bK){if(bl.hash.indexOf(cy)===-1){ax=true}}var cA=bl.href.split("#")[0]+"#"+cy;var cx="";if(ab.urlPattern){var p=ab.urlPattern.replace("[gid]",ab.galleryUID).replace("[pid]",cw);cA=bl.origin+p;cy="";cx={pid:cw}}if(j){if("#"+cy!==window.location.hash){history[bK?"replaceState":"pushState"](cx,document.title,cA)}}else{if(bK){bl.replace(cA)}else{bl.hash=cy}}bK=true;bD=setTimeout(function(){Z=false},60)};aJ("History",{publicMethods:{initHistory:function(){by.extend(ab,a1,true);if(!ab.history){return}bl=window.location;ax=false;b4=false;bK=false;bq=M();j=("pushState" in history);if(bq.indexOf("gid=")>-1){bq=bq.split("&gid=")[0];bq=bq.split("?gid=")[0]}a7("afterChange",a3.updateURL);a7("unbindEvents",function(){by.unbind(window,"hashchange",a3.onHashChange)});var p=function(){am=true;if(!b4){if(ax){history.back()}else{if(bq){bl.hash=bq}else{if(j){history.pushState("",document.title,bl.pathname+bl.search)}else{bl.hash=""}}}}cr()};a7("unbindEvents",function(){if(bE){p()}});a7("destroy",function(){if(!am){p()}});a7("firstUpdate",function(){bG=ck().pid});if(ab.urlPattern){window.onpopstate=function(cx){a3.onHashChange()}}var cw=bq.indexOf("pid=");if(cw>-1){bq=bq.substring(0,cw);if(bq.slice(-1)==="&"){bq=bq.slice(0,-1)}}setTimeout(function(){if(F){by.bind(window,"hashchange",a3.onHashChange)}},40)},onHashChange:function(){if(M()===bq){b4=true;a3.close();return}if(!Z){cu=true;a3.goTo(ck().pid);cu=false}},updateURL:function(){cr();if(cu){return}if(!bK){aF()}else{b1=setTimeout(aF,800)}}}});by.extend(a3,cm)};return a});